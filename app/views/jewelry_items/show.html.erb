<div class="container">
	<div class="product-hero card">
		<div class="product-grid">
			<div class="product-media">
				<%# placeholder avatar / image - replace with real uploads later %>
				<div class="product-image">üíç</div>
						<div class="product-actions">
							<%= button_tag 'Edit Item', type: 'button', class: 'btn btn-outline btn-sm', onclick: "window.location='#{edit_jewelry_item_path(@item)}'", aria: { label: "Edit #{@item.name}" } %>
							<%= button_tag 'Back to Catalog', type: 'button', class: 'btn btn-sm', onclick: "window.location='#{jewelry_items_path}'", aria: { label: 'Back to catalog' } %>
						</div>
			</div>

			<div class="product-details">
				<h1 class="product-title"><%= @item.name %></h1>
				<div class="product-meta small muted">SKU: <%= @item.sku %> ‚Ä¢ Category: <%= @item.jewellery_category.try(:name) || '‚Äî' %></div>
				<p class="product-desc"><%= simple_format(@item.description.to_s) %></p>

				<div class="product-pricing">
					<div class="price-large"> <%= "\u20B9#{'%.2f' % @item.price}" %> </div>
					<div class="availability small muted">
						<% if @item.quantity.present? && @item.quantity > 0 %>
							In stock: <strong><%= @item.quantity %> pcs</strong>
						<% elsif @item.metal %>
							Metal stock available ‚Äî check stores below
						<% else %>
							Out of stock
						<% end %>
					</div>
				</div>

				<div class="product-attributes">
					<dl>
						<dt>Metal</dt><dd><%= @item.metal.try(:name) || '‚Äî' %></dd>
						<dt>Purity</dt><dd><%= @item.purity.try(:name) || '‚Äî' %></dd>
						<dt>Weight (g)</dt><dd><%= @item.weight_grams.to_f %> g</dd>
					</dl>
				</div>
			</div>
		</div>

		<% if @item.metal %>
			<div class="stock-breakdown muted small" style="margin-top:12px">
				<% stocks = MetalStock.where(metal: @item.metal) %>
				<strong>Store stock:</strong> <%= stocks.map{|s| "#{s.store.name}: #{s.available_grams}g"}.join(' | ').html_safe %>
			</div>
		<% end %>
	</div>
</div>
