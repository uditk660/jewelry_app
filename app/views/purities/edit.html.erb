<style>
  /* Scoped styles to match new form */
  .purity-wrap{max-width:820px;margin:18px auto}
  .purity-card{background:#fff;padding:20px;border-radius:10px;box-shadow:0 8px 24px rgba(16,24,40,0.06)}
  .purity-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
  .purity-title{font-size:18px;font-weight:700;color:#0f172a}
  .form-row{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:12px}
  .form-col{flex:1;min-width:220px}
  label{display:block;margin-bottom:6px;color:#0f172a}
  input[type=text],input[type=number],textarea,select{width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e6eef6;background:#fbfdff}
  textarea{min-height:90px}
  .form-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:14px}
  .btn{padding:8px 12px;border-radius:8px;border:1px solid #e6eef6;background:#f8fafc;color:#0f172a}
</style>

<div class="purity-wrap">
  <div class="purity-card" style="display:grid;grid-template-columns:320px 1fr;gap:18px;align-items:start">
    <div class="purity-visual" style="display:flex;flex-direction:column;align-items:center;gap:12px;padding:12px">
      <svg width="180" height="140" viewBox="0 0 240 180" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          <linearGradient id="g1b" x1="0" x2="1">
            <stop offset="0" stop-color="#FFD54A"/>
            <stop offset="1" stop-color="#FFB300"/>
          </linearGradient>
        </defs>
        <rect x="10" y="20" rx="18" ry="18" width="220" height="140" fill="#FFF7E6" stroke="#FFECB3"/>
        <g transform="translate(40,36)">
          <circle cx="64" cy="30" r="32" fill="url(#g1b)" stroke="#E6A700" stroke-width="2"/>
        </g>
      </svg>
      <div style="text-align:center">
        <div style="font-weight:700;color:#0f172a">Edit purity</div>
        <div style="color:#475569;font-size:13px">Update purity details and per-gram price</div>
      </div>
    </div>

    <div class="purity-form">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <div style="font-size:18px;font-weight:700;color:#0f172a">Edit Purity</div>
        <div><%= link_to 'Back', purities_path, class: 'btn' %></div>
      </div>

      <%= form_for @purity, url: purity_path(@purity), method: :patch do |f| %>
        <div class="form-row">
          <div class="form-col">
            <%= f.label :metal_id, 'Metal' %>
            <%= f.collection_select :metal_id, @metals, :id, :name, include_blank: '— Select metal —' %>
          </div>
          <div class="form-col">
            <%= f.label :name %>
            <%= f.text_field :name, placeholder: 'e.g., 18K' %>
          </div>
        </div>

        <div class="form-row">
          <div class="form-col">
            <%= f.label :purity_percent, 'Purity (%)' %>
            <%= f.number_field :purity_percent, step: 0.0001 %>
          </div>
          <div class="form-col">
            <%= f.label :updated_price, 'Price per gram (₹)' %>
            <%= f.number_field :updated_price, step: 0.01 %>
          </div>
        </div>

        <div class="form-row">
          <div class="form-col">
            <%= f.label :total_weight, 'Total weight (g)' %>
            <%= f.number_field :total_weight, step: 0.001, placeholder: 'e.g., 100.000' %>
          </div>
        </div>

        <div class="form-row">
          <div style="flex:1">
            <%= f.label :remarks %>
            <%= f.text_area :remarks %>
          </div>
        </div>

        <div class="form-actions">
          <%= link_to 'Cancel', purities_path, class: 'btn' %>
          <%= f.submit 'Update Purity', class: 'btn' %>
        </div>
      <% end %>
    </div>
  </div>
</div>
